<!DOCTYPE html>
<html>
<head>
    <title>Mono Test</title>
    <meta charset="utf-8">
    <script type="text/javascript" src="../lib/dat.gui.js"></script>
    <script type="text/javascript" src = "../lib/t.js"></script>
    <script type="text/javascript" src = "../lib/attr.js"></script>
    <script type="text/javascript">
        function init(){
            //1、创建DataBox和Network
            var gui = new dat.GUI();
            var box = new mono.DataBox();
            var network = new mono.Network3D(box, null, monoCanvas);
            mono.Utils.autoAdjustNetworkBounds(network,document.documentElement,'clientWidth','clientHeight');

            //2、添加光源
            var pointLight = new mono.PointLight(0xFFFFFF,1.5);
            pointLight.setPosition(1000,1000,1000);
            box.add(pointLight);
            box.add(new mono.AmbientLight(0x888888));

            //3、添加物体
            var cube = window.cube =  new mono.Cube(200, 200, 200);
            cube.s({
                'm.type': 'phong',
                'm.texture.image': './images/box.jpg',
                // 'm.color': 'green',
                // 'm.ambient': 'green',
            });
            cube.setRotation(-Math.PI/10, -Math.PI/5, Math.PI/10);
            box.add(cube);

            //环境的基本属性
            var environment = gui.addFolder('灯光属性');

            //对象的基本属性
            var cubeAttr = new Attribute(cube);
            var attr = gui.addFolder('Attributes');
            attr.add(cubeAttr, 'width', 100, 3000).onChange(function(value) {
                var func = mono.setter(this.property);
                if(this.object.obj[func]) {
                    this.object.obj[func](value);
                }
            });
            attr.add(cubeAttr, 'height', 100, 3000).onChange(function(value) {
                var func = mono.setter(this.property);
                if(this.object.obj[func]) {
                    this.object.obj[func](value);
                }
            });
            attr.open();

            //对象的基本属性
            var styleAttr = new Style(box);
            var attr = gui.addFolder('对象属性');
            attr.add(styleAttr, 'm.texture.image',[ './images/box.jpg', './images/box2.jpg', 'hooray' ]).onFinishChange(function(value) {
                var box = this.object.obj, property = this.property;
                if(box instanceof mono.DataBox) {
                    cube.setStyle(property, value);
                }
            });
        }
    </script>
</head>
<body onload = 'init()'>
    <div>
        <canvas id="monoCanvas"/>
    </div>
</body>
</html>